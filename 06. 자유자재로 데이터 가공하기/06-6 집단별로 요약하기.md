## 📌 집단별로 요약하기
- '집단 별 평균'이나 '집단 별 빈도'처럼 각 집단을 요약한 값을 구할 때는 df.groupby()와 df.agg()를 사용한다.


#### ✔️ Do it! 실습 - 집단별로 요약하기

**1. 전체 요약 통계량 구하기**
- 요약 통계량을 구하는 df.agg()를 이용해보자
- df.agg() 에 mean_math = ('math', 'mean') 처럼 요약값을 할당할 변수명과 =을 입력해보자

```python
# math 평균 구하기
import pandas as pd
exam = pd.read_csv('exam.csv')
exam.agg(mean_math = ('math', 'mean'))
```

- 요약값을 할당할 변수명은 assign()처럼 자유롭게 정하되, 따옴표는 입력하지 않는다.

**2. 집단별 요약 통계량 구하기**
- df.groupby()에 변수를 지정하면 변수의 범주별로 데이터를 분리한다.
- agg()를 적용하면 집단별 요약 통계량을 구한다.

```python
# nclass별로 분리하며, math 평균 구하기
exam.groupby('nclass') \
    .agg(mean_math = ('math','mean'))
```

<img width="92" alt="image" src="https://github.com/sm9199/Python_Data_Analysis_Study/assets/128019851/6faec1a6-dbea-480c-9ecf-59fffac84e0e">

> 🍯 변수를 인덱스로 바꾸지 않기
>  - 위의 결과로 보면 집단을 나타낸 변수명 nclass가 인덱스(index)로 바뀌어 mean_math보다 밑에 표시되어 있다.
>  - df.groupby()에 as_index = False를 해주면 원상태로 유지된다.

```python
# nclass별로 분리하며, math 평균 구하기
exam.groupby('nclass', as_index = False) \
    .agg(mean_math = ('math','mean'))
```

<img width="105" alt="image" src="https://github.com/sm9199/Python_Data_Analysis_Study/assets/128019851/3aff81fd-a741-48c7-91aa-649e30c56269">

**3. 여러 요약 통계량 한 번에 구하기**
- df.aggign()으로 여러 변수를 한 번에 추가하는 것과 마찬가지로 df.agg()로도 여러 요약 통계량을 한 번에 구할 수 있다.

```python
# nclass별로 분리하며, math 평균, math 점수 총합, math 점수 중앙값, math 학생 빈도
exam.groupby('nclass') \
    .agg(mean_math = ('math','mean'),
         sum_math = ('math','sum'),
         median_math = ('math','median'),
          n = ('math','count'))
```

<img width="219" alt="image" src="https://github.com/sm9199/Python_Data_Analysis_Study/assets/128019851/34227b17-d6cf-41f7-9f5f-5f0bb322a52b">


> 🍯 agg()에 자주 사용하는 요약 통계량 함수
>
> - size, count: 그룹 데이터의 갯수
>
> - mean, median, min, max: 그룹 데이터의 평균, 중앙값, 최소, 최대
>
> - sum, prod, std, var, quantile : 그룹 데이터의 합계, 곱, 표준편차, 분산, 사분위수
>
> - first, last: 그룹 데이터 중 가장 첫번째 데이터와 가장 나중 데이터


**4. 모든 변수의 요약 통계량 한 번에 구하기**
- df.groupby()에 agg() 대신 mean()이나 sum()과 같은 요약 통계량 함수를 적용하면 데이터 프레임에 들어 있는 모든 변수의 요약 통계량을 한번에 구할 수 있다.

 ```python
exam.groupby('nclass').mean()
```

<img width="160" alt="image" src="https://github.com/sm9199/Python_Data_Analysis_Study/assets/128019851/c4665e7f-8bf8-4a5f-b321-52af0217df65">
